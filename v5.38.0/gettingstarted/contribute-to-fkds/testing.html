<!doctype html>
<html lang="sv" class="layout--pattern" data-root-url="../..">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Automatisk testning - FK Designsystem</title>

        <!-- prettier-ignore -->
        <link
            rel="stylesheet"
            href="../../assets/docs-6e2086.css"
            crossorigin
            integrity="sha384-nFampl5SKsCvDUFVH3sb1sDDV1PrkDTUZEjs0SidmLezvMmeH72NtuBQXQb+osXx"
            
        />
        <link
            rel="stylesheet"
            href="../../assets/docs-exp-3cb848.css"
            crossorigin
            integrity="sha384-RIFdezZEyghKBnWGnU8GalsCL/pyORCRQSD/JH9H2VJRldNydpMFVdrliikCHoE5"
            data-theme="exp" disabled
        />
        <link
            rel="stylesheet"
            href="../../assets/docs-int-b89a7a.css"
            crossorigin
            integrity="sha384-GsPRhr7ciVP6tZLZNtu7XqSTyiRF9MKoN27IgzNFOlySwiHbE70mXb4Axk1KsG52"
            data-theme="int" disabled
        />

        <!-- prettier-ignore -->
        <script
            src="../../assets/bootstrap-956ec3.js"
            crossorigin
            integrity="sha384-xxAJqJoQn4hXyrxMhtQL+Vf9cvR79mtI9cjQwcm4awdJR3rcJZo1/+24cjUnFmfe"
            
        ></script>

        <!-- prettier-ignore -->
        <script>
    function themeRenderBlocker() {
        const theme = window.localStorage.getItem("fkds-theme") ?? "exp";
        const style = Array.from(document.querySelectorAll("[data-theme]"));
        for (const el of style) {
            el.disabled = el.dataset.theme !== theme;
        }
    }

    themeRenderBlocker();
</script>
<script>
    (() => {
        withCookieConsent(() =>  {
            const allowedHostnames = [
  "designsystem.forsakringskassan.se",
  "designsystem.fk.se",
  "ds.fk.se",
  "forsakringskassan.github.io"
];
            if (allowedHostnames.length === 0 || allowedHostnames.includes(location.hostname)) {
                /* Matomo */
                var _paq = (window._paq = window._paq || []);
                
                _paq.push(["trackPageView"]);
                _paq.push(["enableLinkTracking"]);
                (function () {
                    var u = "https://webstats.forsakringskassan.se/matomo/";
                    _paq.push(["setTrackerUrl", u + "matomo.php"]);
                    _paq.push(["setSiteId", "19"]);
                    var d = document,
                        g = d.createElement("script"),
                        s = d.getElementsByTagName("script")[0];
                    g.async = true;
                    g.src = u + "matomo.js";
                    s.parentNode.insertBefore(g, s);
                })();
                /* End Matomo Code */
            } else {
                console.error(
                    "Matomo analytics disabled as we are not running on one of the configured hostnames",
                    allowedHostnames,
                );
            }
        });
    })();
</script>


        <link
            rel="preload"
            href="../../search-data-fa7e3c.json"
            as="fetch"
            crossorigin
            integrity="sha384-O2UYP4IObWuttSo1kpzi3vdV+MgyPOgx3jGIfVm8tCfQC2Zmvbt0m7ytMiT8NHSH"
            id="search-data"
        />
    </head>
    <body>
        <!-- prettier-ignore -->
        <div class="cookie-warning">
    <!-- [html-validate-disable-next heading-level, no-unused-disable -- allowed sectioning root] -->
    <h1>Kakor på webbplatsen</h1>
    <p>
        Vi använder kakor (cookies) för att webbplatsen ska fungera så bra som möjligt för dig.<br />
        Vi använder också kakor för webbanalys för att göra webbplatsen bättre.
    </p>
    <p>Godkänner du att vi också använder kakor för webbanalys?</p>

    <div class="button-group">
        <button id="consent-all-button" class="button button-group__item button--primary" type="button">
            Ja, jag godkänner alla kakor
        </button>

        <button id="consent-functional-button" class="button button-group__item button--secondary" type="button">
            Nej, jag godkänner bara nödvändiga kakor
        </button>
    </div>
</div>


        <div class="layout-wrapper">
            <header>
                <!-- prettier-ignore --><div class="page-header__root">
    <div class="page-header">
        <a class="page-header__logo" href="../../index.html">
            <span aria-label="FK Designsystem" role="img" class="page-header__logo--small"> </span>
        </a>
        <a class="page-header__app-name" href="../../index.html"> FK Designsystem </a>
        <div class="page-header__right"><nav id="topnav" class="docs-topnav" aria-label="Primär">
    <ul class="docs-topnav__list">
        <!-- prettier-ignore -->
        
        
        
        <li class="docs-topnav__item ">
            <a class="docs-topnav__anchor" href="../"> Kom igång </a>
        </li>
        
        
        
        
        <li class="docs-topnav__item ">
            <a class="docs-topnav__anchor" href="../../components/"> Komponenter </a>
        </li>
        
        
        
        
        <li class="docs-topnav__item ">
            <a class="docs-topnav__anchor" href="../../guides/"> Guider </a>
        </li>
        
        
        
        
        <li class="docs-topnav__item ">
            <a class="docs-topnav__anchor" href="../../functions/"> Funktioner </a>
        </li>
        
        
        
        
        <li class="docs-topnav__item ">
            <a class="docs-topnav__anchor" href="../../styles/"> Visuellt </a>
        </li>
        <li class="docs-topnav__item docs-topnav__item--more" style="visibility: hidden">
            <button type="button" class="docs-topnav__anchor" aria-expanded="false">
                <span>Mer</span>
                <svg class="icon" focusable="false" aria-hidden="true">
                    <use xlink:href="#docs-icon-arrow-down"></use>
                </svg>
            </button>
            <div class="docs-contextmenu">
                <ul class="docs-contextmenu__list">
                    <!-- prettier-ignore -->
                    
                    
                    
                    <li class="docs-contextmenu__item " style="display: none">
                        <a class="docs-contextmenu__anchor" href="../"> Kom igång </a>
                    </li>
                    
                    
                    
                    
                    <li class="docs-contextmenu__item " style="display: none">
                        <a class="docs-contextmenu__anchor" href="../../components/"> Komponenter </a>
                    </li>
                    
                    
                    
                    
                    <li class="docs-contextmenu__item " style="display: none">
                        <a class="docs-contextmenu__anchor" href="../../guides/"> Guider </a>
                    </li>
                    
                    
                    
                    
                    <li class="docs-contextmenu__item " style="display: none">
                        <a class="docs-contextmenu__anchor" href="../../functions/"> Funktioner </a>
                    </li>
                    
                    
                    
                    
                    <li class="docs-contextmenu__item " style="display: none">
                        <a class="docs-contextmenu__anchor" href="../../styles/"> Visuellt </a>
                    </li>
                    </ul>
            </div>
        </li>
    </ul>
</nav>

            <div class="page-header__right-slot">
                <div class="toolbar"><div class="toolbar__item">
    <form id="search" role="search">
        <button class="text-field__input" type="submit">
            <svg focusable="false" class="icon button__icon">
                <use xlink:href="#docs-icon-search"></use></svg
            >Sök <kbd>ctrl-k</kbd>
        </button>
    </form>
</div>
<div class="toolbar__item">
    <div class="select-field" style="visibility: hidden">
        <label for="fkds-theme-select" class="label sr-only"> Tema </label>
        <div class="select-field__icon-wrapper">
            <select id="fkds-theme-select" class="select-field__select">
                <option value="exp">Försäkringskassan</option>
                <option value="int">FK Hapo</option>
            </select>
            <svg focusable="false" class="icon select-field__icon">
                <use xlink:href="#docs-icon-arrow-down"></use>
            </svg>
        </div>
    </div>

    <script>
        function themeSelector() {
            function getSelectedTheme(key) {
                return window.localStorage.getItem(key) ?? "exp";
            }

            function saveSelectedTheme(key, value) {
                window.localStorage.setItem(key, value);
            }

            function enableTheme(theme) {
                const style = Array.from(document.querySelectorAll("[data-theme]"));
                for (const el of style) {
                    el.disabled = el.dataset.theme !== theme;
                }
            }

            const el = document.querySelector("#fkds-theme-select");
            const wrapper = /** @type {HTMLElement} */ (el.closest(".select-field"));
            el.addEventListener("change", () => {
                const theme = el.value;
                saveSelectedTheme("fkds-theme", theme);
                enableTheme(theme);
            });

            const selected = getSelectedTheme("fkds-theme");
            enableTheme(selected);
            el.value = selected;

            wrapper.style.visibility = null;
        }

        themeSelector();
    </script>
</div>
</div>
            </div>
        </div>
    </div>
</div>
</header>

            <div id="primary">
                <!-- prettier-ignore -->
<div id="sidenav">
<input type="checkbox" class="sidenav__toggle" aria-label="Open/close navigation" />
<nav class="navigation" aria-label="Sekundär">
<ol>
    <!-- prettier-ignore --><!-- prettier-ignore -->
    <li class="expandable ">
        <details >
            <summary>Använda designsystemet</summary>
            <!-- prettier-ignore -->
            
            
<ol>
    <!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="../use-design-system/getting-started.html"
            
        >
            Kom igång
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="../use-design-system/getting-started-application.html"
            
        >
            Ta fram applikation
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="../use-design-system/icon-library.html"
            
        >
            Skapa eget ikonbibliotek
        </a>
    </li><!-- prettier-ignore --></ol>

            
        </details>
    </li><!-- prettier-ignore -->
    <!-- prettier-ignore --><!-- prettier-ignore -->
    <li class="expandable active">
        <details open>
            <summary>Bidra till designsystemet</summary>
            <!-- prettier-ignore -->
            
            
<ol>
    <!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="./"
            
        >
            Bidra till designsystemet
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="./contributing-developers.html"
            
        >
            För utvecklare
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="./release.html"
            
        >
            Releaseprocess
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link active">
        <!-- prettier-ignore -->
        <a
            href="./testing.html"
            
        >
            Automatisk testning
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="./checklist-publication.html"
            
        >
            Checklista vid publicering
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="./commits.html"
            
        >
            Commits och commitmeddelanden
        </a>
    </li><!-- prettier-ignore --></ol>

            
        </details>
    </li><!-- prettier-ignore -->
    <!-- prettier-ignore --><!-- prettier-ignore -->
    <li class="expandable ">
        <details >
            <summary>Om designsystemet</summary>
            <!-- prettier-ignore -->
            
            
<ol>
    <!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="../about/"
            
        >
            Designsystemet
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="../about/news.html"
            
        >
            Nyheter
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="../about/release-plan.html"
            
        >
            Releaseplan
        </a>
    </li><!-- prettier-ignore --></ol>

            
        </details>
    </li><!-- prettier-ignore -->
    <!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="../help-and-support.html"
            
        >
            Hjälp och support
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <li class="expandable ">
        <details >
            <summary>Migreringsguider</summary>
            <!-- prettier-ignore -->
            
            
<ol>
    <!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="../migration/migrating-to-fieldset.html"
            
        >
            Fieldset migreringsguide
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="../migration/migrating-to-v5.html"
            
        >
            Version 5 migreringsguide
        </a>
    </li><!-- prettier-ignore --></ol>

            
        </details>
    </li><!-- prettier-ignore -->
    <!-- prettier-ignore --></ol>
</nav>
</div>


                <!-- prettier-ignore -->
                <script
                    src="../../assets/vendor-vue-a2f4e5.js"
                    crossorigin
                    integrity="sha384-G0p1/R2lkvkBeu18tmdftl6amM/ogqlPyFs4TbAaHZ6wWDgDjawSdlikX3tImEFu"
                ></script>
                <script
                    src="../../assets/vendor-fkui-logic-1193bc.js"
                    crossorigin
                    integrity="sha384-UNmhiYi/XVBF/0CUVZ3OrzBhrjxEMOts2MfS8iFwj7DP+u5HC5r8NIJz+MsdQyrL"
                ></script>
                <script
                    src="../../assets/vendor-fkui-date-9b7c35.js"
                    crossorigin
                    integrity="sha384-XgTn6yWRIVTQ33nFXLN5K2ZaFcovqJYAUXIhhFPsvsyWe3HAizwpv5WRjT6S1vOM"
                ></script>
                <script
                    src="../../assets/vendor-fkui-vue-1f14b8.js"
                    crossorigin
                    integrity="sha384-qWXAjYPcK2tOu4sl0xLowxEGd/zE0DY/83ZkL/+jVRNhvoYw00njtiSxrLTxhbdf"
                ></script>
                <script
                    src="../../assets/vendor-forsakringskassan-docs-live-example-131375.js"
                    crossorigin
                    integrity="sha384-nJLPQGIUBkkwVgDY+ToqjpI+vosaIHaIBoTit9uWov/I2yjBNiUgUWlsfRJXelga"
                ></script>

                <!-- prettier-ignore --><main>
                    <!-- [html-validate-disable-next heading-level, no-unused-disable -- allowed sectioning root] -->
                    <h1 id="title">Automatisk testning</h1>

                    
                    <div id="aside">
                        <!-- prettier-ignore -->
<dl>
    <!-- prettier-ignore -->
    
</dl>


                        
                        <details id="outline">
                            <summary class="outline__heading">Innehåll</summary>
                            <ul>
                                
                                <li><a href="#terminologi">Terminologi</a></li>
                                
                                <li><a href="#overgripande_riktlinjer">Övergripande riktlinjer</a></li>
                                
                                <li><a href="#jest">Jest</a></li>
                                
                                <li><a href="#komponenttester">Komponenttester</a></li>
                                
                                <li><a href="#e2e_tester">E2E tester</a></li>
                                
                                <li><a href="#pageobject_for_cypress">Pageobject för Cypress</a></li>
                                
                            </ul>
                        </details>
                        
                    </div>
                    

                    <div id="content">
                        <!-- prettier-ignore -->
<p>Den här sidan innehåller riktlinjer för automatiska testfall.</p>
<h2 id="terminologi"><a class="header-anchor" href="#terminologi">Terminologi</a></h2><table class="table">
<thead>
<tr class="table__row">
<th class="table__column table__column--text" scope="col">Förkortning</th>
<th class="table__column table__column--text" scope="col">Term</th>
<th class="table__column table__column--text" scope="col">Beskrivning</th>
</tr>
</thead>
<tbody>
<tr class="table__row">
<td class="table__column table__column--text">SUT</td>
<td class="table__column table__column--text">System under test</td>
<td class="table__column table__column--text">Den del av systemet som testas, exempelvis komponent eller enhet.</td>
</tr>
</tbody>
</table>
<h2 id="overgripande_riktlinjer"><a class="header-anchor" href="#overgripande_riktlinjer">Övergripande riktlinjer</a></h2><h3 id="enhetstester_med_jest"><a class="header-anchor" href="#enhetstester_med_jest">Enhetstester med <code>jest</code></a></h3><p>Med enhetstester testar vi:</p>
<ul>
<li>logik</li>
<li>events</li>
<li>props</li>
<li>regler för HTML-Validate.</li>
</ul>
<p>I enhetstester testar vi funktionalitet i isolation och mockar omvärlden.
Styrkan med enhetstester i Jest ligger i att de är snabba, enkla att mocka och att man enkelt kan anropa funktioner.
Svagheten ligger i att det är svårt att vänta ut cykler från exempelvis Vue.js.</p>
<h3 id="komponenttester_med_cypress"><a class="header-anchor" href="#komponenttester_med_cypress">Komponenttester med <code>cypress</code></a></h3><p>Med komponenttester testar vi:</p>
<ul>
<li>enskilda komponenter</li>
<li>interaktion med komponenten.</li>
</ul>
<p>Komponenttester körs i Chrome med Cypress och där testar vi komponenter i isolation.
Vi interagerar med komponenten på samma sätt som en konsument implementerat ett use-case och på ett sätt som en slutkund interagerat med.
Styrkan i komponenttester ligger i att en riktig browser kör testfallen och att Cypress är bra på att hantera att vänta på cykler från exempelvis Vue.js.
Svagheten ligger i att det är svårare att mocka omvärlden och lockande att skriva tester som är beroende av många andra komponenter (ej isolerade tester).</p>
<h3 id="e2e_med_cypress"><a class="header-anchor" href="#e2e_med_cypress">E2E med <code>cypress</code></a></h3><p>Med E2E-tester testar vi:</p>
<ul>
<li>interaktion mellan flera komponenter</li>
<li>exempel i dokumentation.</li>
</ul>
<p>E2E-tester kör i Chrome med Cypress och kräver en webserver som servar en websida, sidan under test.
För komponenter använder vi oss av samma pageobject som konsumenter och kompletterar detta med interna pageobjekt för respektive sida under test.
Styrkan i E2E-tester ligger i att det är enkelt att testa hur flera komponenter interagerar med varandra.
Svagheten ligger i att testerna är dyra resursmässigt (framförallt långsamma).</p>
<h3 id="filnamn_och_katalogstruktur"><a class="header-anchor" href="#filnamn_och_katalogstruktur">Filnamn och katalogstruktur</a></h3>
                <div
                    id="example-7a373c"
                    class="code-preview code-preview--default"
                    
                    
                    data-language=""
                >
                    
                    <pre class="code-preview__markup"><code>root
├─┬ packages
│ ├─┬ logic
│ │ └─┬ src
│ │   └── ${component.spec.ts} (Jest enhetstester)
│ └─┬ vue
│   ├─┬ pageobject
│   │ └── ${component}.pageobject.ts (Externa pageobject)
│   └─┬ src
│     ├── ${component}.ct.ts (Cypress component tests)
│     └── ${component}.spec.ts (Jest enhetstester)
└─┬ tests
  └─┬ specs
    ├─┬ pageobject
    │ └── ${component}.pageobject.ts (Interna pageobject)
    └─┬ specs
      └── ${component}.spec.ts (Cypress E2E)
</code></pre>
                </div>
            <h3 id="testdata"><a class="header-anchor" href="#testdata">Testdata</a></h3><h4 id="minimera_innehallet_i_testdata"><a class="header-anchor" href="#minimera_innehallet_i_testdata">Minimera innehållet i testdata</a></h4><p>Håll nere innehållet i din testdata, inkludera bara det som är relevant för just det specifika testfallet.</p>

                <div
                    id="example-29eb6d"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="diff"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-diff" tabindex="0"> it(&quot;should get full name&quot;, () =&gt; {
     const data = {
         givenName: &quot;Kalle&quot;,
         familyName: &quot;Anka&quot;,
<span class="hljs-deletion">-</span>
<span class="hljs-deletion">-        /* irrelevant fields */</span>
<span class="hljs-deletion">-        foo: 1,</span>
<span class="hljs-deletion">-        bar: 2,</span>
<span class="hljs-deletion">-        baz: 3,</span>
     };
     const result = getFullName(data);
     expect(result).toBe(&quot;Kalle Anka&quot;);
 });
</code></pre>
                </div>
            <p>Motivering:
Onödig data ökar den kognitiva belastningen för läsaren och gör det svårare att urskilja vad som är viktigt.</p>
<p>Ibland kan detta orsaka konflikt med datatyper i Typescript:</p>

                <div
                    id="example-19de4e"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getFullName</span>(<span class="hljs-params"><span class="hljs-attr">src</span>: <span class="hljs-title class_">MyComplexObject</span></span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-comment">/* ... */</span>
}
</code></pre>
                </div>
            <p>Överväg att ändra prototypen så den inte kräver mer än nödvändigt:</p>

                <div
                    id="example-9833a0"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="diff"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-diff" tabindex="0"><span class="hljs-deletion">-function getFullName(src: MyComplexObject): string {</span>
<span class="hljs-addition">+function getFullName(src: Pick&lt;MyComplexObject, &quot;givenName&quot; | &quot;familyName&quot;&gt;): string {</span>
</code></pre>
                </div>
            <p>alternativt:</p>

                <div
                    id="example-551904"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="diff"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-diff" tabindex="0"><span class="hljs-deletion">-function getFullName(src: MyComplexObject): string {</span>
<span class="hljs-addition">+interface Name {</span>
<span class="hljs-addition">+    givenName: string;</span>
<span class="hljs-addition">+    familyName: string;</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+function getFullName(src: Name): string {</span>
</code></pre>
                </div>
            <p>Ytterligare ett alternativ är att skapa en funktion för att skapa upp objektet:</p>

                <div
                    id="example-54cb1b"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="diff"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-diff" tabindex="0"><span class="hljs-addition">+function createComplexObject(partial: Partial&lt;MyComplexObject&gt;): MyComplexObject {</span>
<span class="hljs-addition">+    return {</span>
<span class="hljs-addition">+        givenName: &quot;Test&quot;,</span>
<span class="hljs-addition">+        familyName: &quot;Testorsson&quot;,</span>
<span class="hljs-addition">+        foo: 1,</span>
<span class="hljs-addition">+        bar: 2,</span>
<span class="hljs-addition">+        baz: 3,</span>
<span class="hljs-addition">+        ...partial,</span>
<span class="hljs-addition">+    };</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+</span>
 it(&quot;should get full name&quot;, () =&gt; {
<span class="hljs-deletion">-    const data = {</span>
<span class="hljs-addition">+    const data = createComplexObject({</span>
         givenName: &quot;Kalle&quot;,
         familyName: &quot;Anka&quot;,
<span class="hljs-deletion">-</span>
<span class="hljs-deletion">-        /* irrelevant fields */</span>
<span class="hljs-deletion">-        foo: 1,</span>
<span class="hljs-deletion">-        bar: 2,</span>
<span class="hljs-deletion">-        baz: 3,</span>
<span class="hljs-deletion">-    };</span>
<span class="hljs-addition">+    });</span>
     const result = getFullName(data);
     expect(result).toBe(&quot;Kalle Anka&quot;);
 });
</code></pre>
                </div>
            <h4 id="foredra_testdata_i_direkt_anslutning_till_testfallet"><a class="header-anchor" href="#foredra_testdata_i_direkt_anslutning_till_testfallet">Föredra testdata i direkt anslutning till testfallet</a></h4><p>Testdata lägger vi i första hand i direkt anslutning till testfallet.</p>

                <div
                    id="example-8ba1d5"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;x should y&quot;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> data = [{ ... }, { ... }];
    <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">func</span>(data);
	<span class="hljs-title function_">expect</span>(result).<span class="hljs-title function_">toHaveLength</span>(<span class="hljs-number">2</span>);
});
</code></pre>
                </div>
            <p>Motivering:
Genom att lägga testdata i anslutning till testet är det lätt att utläsa varför assertions är förväntade och man behöver inte hoppa runt i testfilen för att läsa ut det.</p>
<h4 id="bryt_ut_stor_och_repetitiv_testdata"><a class="header-anchor" href="#bryt_ut_stor_och_repetitiv_testdata">Bryt ut stor och repetitiv testdata</a></h4><p>Om det inte går att minimera storleken på testdata eller den används frekvent bryt ut den till en separat fil.</p>

                <div
                    id="example-904b4b"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="diff"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-diff" tabindex="0"><span class="hljs-addition">+import { twoItems } from &quot;./__fixtures__&quot;;</span>
<span class="hljs-addition">+</span>
 it(&quot;x should y&quot;, () =&gt; {
<span class="hljs-deletion">-    const data = [{ ... }, { ... }];</span>
<span class="hljs-deletion">-    const result = func(data);</span>
<span class="hljs-addition">+    const result = func(twoItems);</span>
     expect(result).toHaveLength(2);
 });
</code></pre>
                </div>
            <p>Filerna läggs med fördel i <code>__fixtures__</code>:</p>

                <div
                    id="example-9ac09a"
                    class="code-preview code-preview--default"
                    
                    
                    data-language=""
                >
                    
                    <pre class="code-preview__markup"><code>MyComponent
├─┬ __fixtures__
│ ├── index.ts
│ └── two-items.ts
└── MyComponent.spec.ts
</code></pre>
                </div>
            <p>Motivering:
Stora mängder testdata distraherar från själva testfallet.</p>
<h3 id="given_when_then"><a class="header-anchor" href="#given_when_then">Given-When-Then</a></h3><p>Även om vi inte alltid skriver ut det explicit skriver vi testfallen enligt formatet:</p>
<ol>
<li>Given: givet följande scenario.</li>
<li>When: när följande inträffar.</li>
<li>Then: vad som förväntas.</li>
</ol>

                <div
                    id="example-abb5ef"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;x should y&quot;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/* given: a button with a click callback */</span>
    <span class="hljs-keyword">const</span> spy = jest.<span class="hljs-title function_">fn</span>();
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">shallowMount</span>(<span class="hljs-title class_">ButtonComponent</span>, {
        <span class="hljs-attr">listeners</span>: {
            <span class="hljs-attr">click</span>: spy,
        },
    });

    <span class="hljs-comment">/* when: the buton is clicked */</span>
    wrapper.<span class="hljs-title function_">click</span>();

    <span class="hljs-comment">/* then: the callback should have been called */</span>
    <span class="hljs-title function_">expect</span>(spy).<span class="hljs-title function_">toHaveBeenCalled</span>();
});
</code></pre>
                </div>
            <p>Motivering:
Formatet uppmuntrar igenomtänkta och strukturerade testfall.</p>
<h3 id="namnsattning"><a class="header-anchor" href="#namnsattning">Namnsättning</a></h3><h4 id="beskriv_tydligt_vad_testfallet_gar_ut_pa"><a class="header-anchor" href="#beskriv_tydligt_vad_testfallet_gar_ut_pa">Beskriv tydligt vad testfallet går ut på</a></h4><p>Varje <code>it</code> (inklusive dess <code>describe</code>) ska kunna läsas och förklara vad testet går ut på.</p>
<p>Dåligt:</p>

                <div
                    id="example-631107"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;propName&quot;</span>, <span class="hljs-function">() =&gt;</span> { ... });
</code></pre>
                </div>
            <p>Förklarar inte vad man förväntar sig av propen</p>
<p>Bra:</p>

                <div
                    id="example-3462ab"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;should emit submit event when clicked&quot;</span>, <span class="hljs-function">() =&gt;</span> { ... });
</code></pre>
                </div>
            <p>Motivering:
Tydligare vad som gått fel när man läser loggar och för att som läsare förstå vad testfallet går ut på.</p>
<h3 id="gruppera_med_describe"><a class="header-anchor" href="#gruppera_med_describe">Gruppera med <code>describe</code></a></h3><ul>
<li>Props grupperas under <code>describe(&quot;props&quot;, () =&gt; { ... })</code>.</li>
<li>Events grupperas under <code>describe(&quot;events&quot;, () =&gt; { ... })</code>.</li>
<li>HTML-Validate regler grupperas under <code>describe(&quot;html-validate&quot;, () =&gt; { ... })</code>.</li>
<li>Dokumentationsexempel grupperas under exemplets namn.</li>
<li>I övrigt gruppera efter logisk funktionalitet.</li>
</ul>
<h3 id="koppla_till_krav_id_dar_applicerbart"><a class="header-anchor" href="#koppla_till_krav_id_dar_applicerbart">Koppla till krav ID där applicerbart</a></h3><p>Motivering:
Det underlättar för både utvecklare och testare att härleda vilket krav testfallet är kopplat till.</p>
<h3 id="checklista"><a class="header-anchor" href="#checklista">Checklista</a></h3><ul>
<li>[ ] Enhetstest för logik?</li>
<li>[ ] Enhetstest för propar?</li>
<li>[ ] Enhetstest för event?</li>
<li>[ ] Enhetstest för HTML-Validate?</li>
<li>[ ] Component tests för interaktion med komponent?</li>
<li>[ ] Cypresstest för exempel i dokumentation?</li>
<li>[ ] Pageobject?</li>
</ul>
<h2 id="jest"><a class="header-anchor" href="#jest">Jest</a></h2><h3 id="import_ordning"><a class="header-anchor" href="#import_ordning">Import ordning</a></h3><p>Import-rader ska sorteras enligt följande:</p>
<ol>
<li>Importer med enbart side-effects.</li>
<li>System och standardbibiliotek.</li>
<li>Tredje-parts bibiliotek.</li>
<li>In-house bibliotek.</li>
<li>Interna beroenden inom monorepo.</li>
<li>Interna beroenden inom paketet.</li>
<li>Systemet under test (SUT) (exempelvis klassen, funktionen, komponenten som testas).</li>
</ol>
<p>Typescript funktion, klass osv:</p>

                <div
                    id="example-6f1642"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;html-validate/jest&quot;</span>;                              <span class="hljs-comment">// 1. Enbart side-effects</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;path&quot;</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;path&quot;</span>;                                <span class="hljs-comment">// 2. NodeJS standardbibiliotek</span>
<span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;lodash&quot;</span>;                                   <span class="hljs-comment">// 3. Tredje-parts bibliotek</span>
<span class="hljs-keyword">import</span> apimock <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@forsakringskassan/apimock-express&quot;</span>; <span class="hljs-comment">// 4. In-house bibliotek</span>
<span class="hljs-keyword">import</span> { focus } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@fkui/logic&quot;</span>;                      <span class="hljs-comment">// 5. Inom monorepo</span>
<span class="hljs-keyword">import</span> { hasSlot } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../utils&quot;</span>;                       <span class="hljs-comment">// 6. Inom paket</span>
<span class="hljs-keyword">import</span> { myFunction } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./my-function&quot;</span>;               <span class="hljs-comment">// 7. SUT</span>
</code></pre>
                </div>
            <p>För en VueJS komponent, importera komponenten sist direkt från <code>.vue</code> filen:</p>

                <div
                    id="example-4a36e1"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-keyword">import</span> <span class="hljs-title class_">MyComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./MyComponent.vue&quot;</span>;
</code></pre>
                </div>
            <p>Motivering: ordningen av imports gör det mer överskådligt och snabbare att greppa.</p>
<h3 id="props"><a class="header-anchor" href="#props">Props</a></h3>
                <div
                    id="example-c0a66c"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;props&quot;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/* v--- denna testas inte här, den ligger under v-model */</span>
    <span class="hljs-comment">/*describe(&quot;highlight&quot;, () =&gt; {

	});*/</span>

    <span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;items&quot;</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;should do something&quot;</span>, <span class="hljs-function">() =&gt;</span> {});
    });

    <span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;vertical&quot;</span>, <span class="hljs-function">() =&gt;</span> {});
});
</code></pre>
                </div>
            <p>Motivering: genom att gruppera i nästlade describes är det enklare att se vad testfallet tillgör, vilken prop exempelvis</p>
<h3 id="v_model_propen_testas_under_describe_v_model"><a class="header-anchor" href="#v_model_propen_testas_under_describe_v_model"><code>v-model</code> propen testas under describe(&quot;v-model&quot;)</a></h3><h3 id="anvand_shallowmount"><a class="header-anchor" href="#anvand_shallowmount">Använd <code>shallowMount</code></a></h3><p>I första hand använd <code>shallowMount</code>.</p>
<p>Om vi behöver andra komponenter så använder vi <code>mount</code> för andra hand.</p>
<p>Om man behöver många default-värden, många repetitiva propar då skapar vi <code>createWrapper</code></p>
<h3 id="it_each"><a class="header-anchor" href="#it_each">it.each</a></h3><p>Används för repetitiva tester där man vill testa många olika input värden som ger olika output värden.</p>
<p>Om din it.each behöver en if-sats dela istället upp it.each i två it.each, en för varje condition.</p>
<p>Om din it.each behöver en description parameter bryt istället ut till en egen it</p>
<h3 id="undvik_attachtodocument_och_attachto"><a class="header-anchor" href="#undvik_attachtodocument_och_attachto">Undvik <code>attachToDocument</code> och <code>attachTo</code></a></h3><p>Om man inte måste! Testar man focus så måste man ha <code>attachTo</code></p>
<p>Motivering: genom att inte attacha till <code>body</code> så behöver vi inte lika mycket uppstädning mellan testfall</p>
<h3 id="foredra_jest_spyon_over_jest_fn"><a class="header-anchor" href="#foredra_jest_spyon_over_jest_fn">Föredra <code>jest.spyOn</code> över <code>jest.fn()</code></a></h3>
                <div
                    id="example-edf242"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="diff"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-diff" tabindex="0"><span class="hljs-deletion">-console.log = jest.fn();</span>
<span class="hljs-addition">+jest.spyOn(console, &#x27;log&#x27;);</span>
</code></pre>
                </div>
            <p>Motivering: <code>jest.spyOn</code> fungerar med <code>jest.clearAllMocks</code></p>
<h3 id="foredra_lokalt_scopad_wrapper_over_global"><a class="header-anchor" href="#foredra_lokalt_scopad_wrapper_over_global">Föredra lokalt scopad wrapper över global</a></h3><p>istället för:</p>

                <div
                    id="example-034c67"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-keyword">let</span> wrapper;

<span class="hljs-title function_">it</span>(.., <span class="hljs-function">() =&gt;</span> {
    wrapper = <span class="hljs-title function_">shallowMount</span>(..);
});
</code></pre>
                </div>
            <p>kör:</p>

                <div
                    id="example-3f34ef"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-title function_">it</span>(.., <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">shallowMount</span>(..);
});
</code></pre>
                </div>
            <h3 id="anvand_get_over_find"><a class="header-anchor" href="#anvand_get_over_find">Använd <code>.get()</code> över <code>.find()</code></a></h3><p>get smäller om den inte finns, find ger ett tomt objekt.</p>
<p>Om du inte i testet ska testa <code>.exists()</code> eller en array med 0 eller fler element.</p>
<h3 id="undvik_utskrifter_i_testfall"><a class="header-anchor" href="#undvik_utskrifter_i_testfall">Undvik utskrifter i testfall</a></h3><p>Undvik att använda <code>console.log</code> (och liknande) i testfallen.</p>
<p>Motivering: det genererar brus i logfiler och gör det svårt att snabbt få en överblick över fallerande testfall då man måste läsa och mentalt filtrera bort från riktiga felmeddelanden.</p>
<p>Om koden under test skriver ut med <code>console.log</code> (eller liknande) bör du <strong>i första hand ifrågasätta syftet</strong> med utskriften.
Utskriften kommer synas för slutkunder i produktion.
För felhantering så visas det bara för den som letar, om det rör sig om ett hindrande fel så kan en exception vara lämpligare och om det inte är hindrande (dvs koden kan hantera det) så ger en utskrift kanske inte något mervärde annat än brus.
Om utskriften bedöms rimlig så bör du också testa att utskriften är korrekt genom att mocka <code>console.log</code>, verifiera resultatet samt avsaknad av andra utskrifter.</p>
<p>Utskrifter från Vue ska hanteras och inte döljas, exempelvis:</p>
<blockquote>
<pre><code>[vue-test-utils]: name is deprecated and will be removed in the next major version.
</code></pre>
</blockquote>
<p>Istället för att dölja meddelandet se till att korrigera din kod.</p>
<p>För att korrekt mocka och verifiera <code>console.log</code> använder du <code>jest.spyOn(..)</code>:</p>

                <div
                    id="example-df063b"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-keyword">import</span> { myFunction } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./my-function&quot;</span>;

<span class="hljs-comment">/* spy on `console.log` but does not stub the function, i.e. the original console.log will still be called */</span>
<span class="hljs-keyword">const</span> log = jest.<span class="hljs-title function_">spyOn</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">&quot;log&quot;</span>);

<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/* keeps the spy but restore eventual mocked implementations of `console.log`. Alternatively `jest.restoreAllMocks()` may be used. */</span>
    log.<span class="hljs-title function_">mockRestore</span>();
});

<span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;noisy test&quot;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/* for this test case stub the original implementation to silence output */</span>
    log.<span class="hljs-title function_">mockReturnValue</span>(<span class="hljs-literal">undefined</span>);

    <span class="hljs-comment">/* `myFunction()` calls `console.log(..)` */</span>
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">myFunction</span>()).<span class="hljs-title function_">toProduceExpectedResult</span>();

    <span class="hljs-comment">/* verify `console.log(..)` has been called exactly once to ensure no other messages was silenced */</span>
    <span class="hljs-title function_">expect</span>(log).<span class="hljs-title function_">toHaveBeenCalledTimes</span>(<span class="hljs-number">1</span>);

    <span class="hljs-comment">/* verify `console.log(..)` was called with the expected message */</span>
    <span class="hljs-title function_">expect</span>(log).<span class="hljs-title function_">toHaveBeenCalledWith</span>(<span class="hljs-string">&quot;lorem ipsum dolot sit amet&quot;</span>);
});
</code></pre>
                </div>
            <p>Undvik <code>console.log = jest.fn()</code> då det gör det svårare att åerställa mellan testfall.
Är du inte försiktig när du mockar <code>console.log</code> försvårar du för andra som försöker använda <code>console.log</code> och du kan dölja riktiga fel som skrivs ut i console.</p>
<h3 id="folj_best_practice_for_jest"><a class="header-anchor" href="#folj_best_practice_for_jest">Följ best practice för jest</a></h3><p>Länk</p>
<h2 id="komponenttester"><a class="header-anchor" href="#komponenttester">Komponenttester</a></h2><h2 id="e2e_tester"><a class="header-anchor" href="#e2e_tester">E2E tester</a></h2><h3 id="vi_skriver_ett_e2e_cypress_test_for_varje_korbart_exempel"><a class="header-anchor" href="#vi_skriver_ett_e2e_cypress_test_for_varje_korbart_exempel">Vi skriver ett E2E cypress test för varje körbart exempel</a></h3><p>Motivering: då exempel är en del av det vi levererar till konsumenter vill vi att de alltid ska vara i ett fungerande skick och inte utdaterade.</p>
<h2 id="pageobject_for_cypress"><a class="header-anchor" href="#pageobject_for_cypress">Pageobject för Cypress</a></h2><p>Vi skriver och levererar pageobject för alla publika komponenter och moduler.</p>
<h3 id="mall"><a class="header-anchor" href="#mall">Mall</a></h3>
                <div
                    id="example-9cb40d"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-comment">/**
 * Description of what this pageobject represents.
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPageobject</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-attr">selector</span>: <span class="hljs-built_in">string</span>;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">selector</span> - Component selector.
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-attr">selector</span>: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">selector</span> = selector;
    }

    <span class="hljs-comment">/**
     * Returns the component root element.
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">el</span>(): <span class="hljs-title class_">Cypress</span>.<span class="hljs-property">Chainable</span>&lt;<span class="hljs-title class_">JQuery</span>&lt;<span class="hljs-title class_">HTMLElement</span>&gt;&gt; {
        <span class="hljs-keyword">return</span> cy.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">selector</span>);
    }

    <span class="hljs-comment">/**
     * Returns the submit button.
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">submitButton</span>(): <span class="hljs-title class_">Cypress</span>.<span class="hljs-property">Chainable</span>&lt;<span class="hljs-title class_">JQuery</span>&lt;<span class="hljs-title class_">HTMLButtonElement</span>&gt;&gt; {
        <span class="hljs-keyword">return</span> cy.<span class="hljs-title function_">get</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.selector}</span> .submit-button`</span>);
    }
}
</code></pre>
                </div>
            <h3 id="anvand_metoder"><a class="header-anchor" href="#anvand_metoder">Använd metoder</a></h3><p>Låt varje beståndsdel av pageobject vara en egen metod.
Undvik arrow-funktion-som-property mönster:</p>
<p>Istället för:</p>

                <div
                    id="example-620298"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPageobject</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-attr">selector</span>: <span class="hljs-built_in">string</span>;

    <span class="hljs-comment">/**
     * Returns the submit button.
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-attr">submitButton</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Cypress</span>.<span class="hljs-property">Chainable</span>&lt;<span class="hljs-title class_">JQuery</span>&lt;<span class="hljs-title class_">HTMLButtonElement</span>&gt;&gt;;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-attr">selector</span>: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">selector</span> = selector;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitButton</span> = <span class="hljs-function">() =&gt;</span> cy.<span class="hljs-title function_">get</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.selector}</span> .submit-button`</span>);
    }
}
</code></pre>
                </div>
            <p>Använd vanliga klassmetoder:</p>

                <div
                    id="example-ead355"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="ts"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-ts" tabindex="0"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPageobject</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-attr">selector</span>: <span class="hljs-built_in">string</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-attr">selector</span>: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">selector</span> = selector;
    }

    <span class="hljs-comment">/**
     * Returns the submit button.
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">submitButton</span>(): <span class="hljs-title class_">Cypress</span>.<span class="hljs-property">Chainable</span>&lt;<span class="hljs-title class_">JQuery</span>&lt;<span class="hljs-title class_">HTMLButtonElement</span>&gt;&gt; {
        <span class="hljs-keyword">return</span> cy.<span class="hljs-title function_">get</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.selector}</span> .submit-button`</span>);
    }
}
</code></pre>
                </div>
            <p>Motivering: koden blir enklare att läsa och förstå, dokumentation hänger ihop med implementation.</p>
<h3 id="undvik_find"><a class="header-anchor" href="#undvik_find">Undvik <code>find(..)</code></a></h3><p>Undvik <code>cy.get(..).find(..)</code> i pageobject.
Skriv istället ihop selectorn med en template literal:</p>

                <div
                    id="example-94dd28"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="diff"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-diff" tabindex="0"><span class="hljs-deletion">-return cy.get(this.selector).find(&quot;.button&quot;);</span>
<span class="hljs-addition">+return cy.get(`${this.selector} .button);</span>
</code></pre>
                </div>
            <p>Motivering: Cypress kommer bara upprepa det sista kommandot (<a href="https://docs.cypress.io/guides/core-concepts/retry-ability#Only-the-last-command-is-retried">retry-ability</a>) så om <code>cy.get(..)</code> inte returnerar det du förväntar dig kommer <code>.find(..)</code> inte heller göra det och trots att <code>find</code> upprepas kommer den agera på det tidigare felaktiga resultatet från <code>cy.get(..)</code>.</p>


                    </div>
                </main>
            </div>

            <footer>
                <!-- prettier-ignore --><div class="footer__left">
    <h1>Kontakta oss</h1>
    <ul>
        <li><a class="anchor" href="mailto:designsystem@forsakringskassan.se">designsystem@forsakringskassan.se</a></li>
        <li><a class="anchor" href="../about/index.html">Om designsystemet</a></li>
    </ul>
</div>

<div class="footer__center"></div>

<div class="footer__right">
    <!-- prettier-ignore -->
    <div class="version">
    <!-- prettier-ignore -->
    <div class="heading--h1">FKDS version 5.38.0</div>
</div>
<div class="toolbar__item">
    <form id="version">
        <button type="submit">
            <span id="version-info" class="anchor"> Byt version </span>
        </button>
    </form>

    <dialog id="version-dialog">
        <div id="version-dialog-head">
            <h1>Välj version</h1>
            <button type="button" class="button button--discrete button--discrete--black">
                <span>Stäng</span>
                <svg class="button__icon icon f-icon-close" focusable="false" aria-hidden>
                    <use xlink:href="#f-icon-close"></use>
                </svg>
            </button>
        </div>
        <div id="version-list">
            <p>Var god vänta, laddar versionsdata...</p>
        </div>
    </dialog>
</div>

<template id="version-list-item">
    <li class="list__item">
        <a class="list__item__itempane">template</a>
    </li>
</template>


    <ul>
        <li><a class="anchor" href="../../changelog.html">Changelog</a></li>
        <li><a class="anchor" href="../../accessibility.html">Tillgänglighetsredogörelse</a></li>
        <li><a class="anchor" href="https://github.com/Forsakringskassan/designsystem">GitHub</a></li>
    </ul>
</div>
</footer>
        </div>

        <!-- prettier-ignore --><div aria-hidden="true" style="display: none">
    <svg xmlns="http://www.w3.org/2000/svg" focusable="false">
        <symbol id="docs-icon-search" viewBox="0 0 512 512">
            <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
            <path
                fill="currentColor"
                d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34M208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128"
            ></path>
        </symbol>
        <symbol id="docs-icon-close" viewBox="0 0 512 512">
            <path
                fill="currentColor"
                d="m322.72 256 100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L256 189.28 155.93 89.21c-12.28-12.28-32.19-12.28-44.48 0l-22.24 22.24c-12.28 12.28-12.28 32.19 0 44.48L189.28 256 89.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L256 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48z"
            ></path>
        </symbol>
        <symbol id="docs-icon-arrow-down" viewBox="0 0 512 512">
            <path
                fill="currentColor"
                d="M239.373 380.982 45.03 186.638c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04l154.746 154.021L411.089 129.99c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L273.315 380.982c-9.373 9.372-24.569 9.372-33.942 0"
            ></path>
        </symbol>
        <symbol id="docs-icon-circle" xml:space="preserve" viewBox="0 0 512 512">
            <path
                d="M489.5 256c0 129-104.6 233.5-233.5 233.5C127 489.5 22.5 385 22.5 256S127 22.5 256 22.5 489.5 127 489.5 256"
                style="fill: currentColor"
            ></path>
            <path
                d="M512 256c0 141.4-114.6 256-256 256S0 397.4 0 256 114.6 0 256 0s256 114.6 256 256M256 469.3c117.8 0 213.3-95.5 213.3-213.3S373.8 42.7 256 42.7 42.7 138.2 42.7 256 138.2 469.3 256 469.3"
                style="fill-rule: evenodd; clip-rule: evenodd"
            ></path>
        </symbol>
        <symbol id="docs-icon-i" xml:space="preserve" x="0" y="0" version="1.1" viewBox="0 0 512 512">
            <style>
                .i {
                    fill: currentColor;
                }
            </style>
            <path
                d="M228.25 243.12c0-15.33 12.42-27.75 27.75-27.75s27.75 12.43 27.75 27.75v117.19c0 15.33-12.43 27.75-27.75 27.75-15.33 0-27.75-12.43-27.75-27.75zM285.09 153.03c0 16.07-13.02 29.09-29.09 29.09s-29.09-13.02-29.09-29.09 13.02-29.09 29.09-29.09 29.09 13.02 29.09 29.09"
                class="i"
            ></path>
        </symbol>
    </svg>
</div>
<!-- prettier-ignore -->
        <dialog id="search-dialog">
    <!-- [html-validate-disable-next wcag/h32 -- handled via script] -->
    <form id="search-form">
        <div class="text-field">
            <label for="search-field" class="label"> Sök </label>
            <div class="text-field__input-wrapper">
                <div class="text-field__icon-wrapper">
                    <input
                        autofocus
                        autocomplete="off"
                        autocapitalize="off"
                        autocorrect="off"
                        id="search-field"
                        type="text"
                        class="text-field__input"
                        maxlength="50"
                        placeholder="Skriv för att börja söka"
                    />
                </div>
            </div>
        </div>
        <div id="search-results"></div>
        <p><kbd>Esc</kbd> för att stänga <kbd>Pil upp/ner</kbd> för att navigera <kbd>Enter</kbd> för att välja</p>
    </form>
</dialog>


        <!-- prettier-ignore -->
        <script
            src="../../assets/processors/selectable-version/select-version-42b338.js"
            crossorigin
            integrity="sha384-9teClDZoUmFqd4Uy9zGlWIwizRBX8jp3Tuvbf8GCf6jj1pTG5nVxJGQ/gOCfOsnK"
            
        ></script>
        <script
            src="../../assets/main-8b3997.js"
            crossorigin
            integrity="sha384-tMUsZzOmoZSz2qWzoCwYEHpbl3EEWosdUVGhRQ8XHBCBoP4QIjodcfAg2qFXy/NO"
            
        ></script>
    </body>

    <!--

         Source file: TESTING.md
         Document ID: fs:TESTING.md
         Document name: testing
         Document alias: 

    -->
</html>
