<!doctype html>
<html lang="sv" class="layout--pattern" data-root-url="../..">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Validator - anpassad - FK Designsystem</title>

        <!-- prettier-ignore -->
        <link
            rel="stylesheet"
            href="../../assets/docs-053fc1.css"
            crossorigin
            integrity="sha384-ll8nTO+ih+SCl1W/OVDL39AsAXQbQmQ/xEmqntsHYxA4G1D6LYDnwPcJHe40z1s/"
            
        />
        <link
            rel="stylesheet"
            href="../../assets/docs-exp-7d254d.css"
            crossorigin
            integrity="sha384-sqWEQkmH2jAsztk3CxUCrdtK8cYykguMIJd1+UAbp+gh1gaJtO0UEs42tyyIWO//"
            data-theme="exp" disabled
        />
        <link
            rel="stylesheet"
            href="../../assets/docs-int-195032.css"
            crossorigin
            integrity="sha384-V/ILRCps6g6bgagi33Opo/H/71OfAwkS2GheQp4DazqjuLDf2mlB1OxMd/9mIfzd"
            data-theme="int" disabled
        />

        <!-- prettier-ignore -->
        <script
            src="../../assets/bootstrap-956ec3.js"
            crossorigin
            integrity="sha384-xxAJqJoQn4hXyrxMhtQL+Vf9cvR79mtI9cjQwcm4awdJR3rcJZo1/+24cjUnFmfe"
            
        ></script>

        <!-- prettier-ignore -->
        <script>
    function themeRenderBlocker() {
        const theme = window.localStorage.getItem("fkds-theme") ?? "exp";
        const style = Array.from(document.querySelectorAll("[data-theme]"));
        for (const el of style) {
            el.disabled = el.dataset.theme !== theme;
        }
    }

    themeRenderBlocker();
</script>
<script>
    (() => {
        withCookieConsent(() =>  {
            const allowedHostnames = [
  "designsystem.forsakringskassan.se",
  "designsystem.fk.se",
  "ds.fk.se",
  "forsakringskassan.github.io"
];
            if (allowedHostnames.length === 0 || allowedHostnames.includes(location.hostname)) {
                /* Matomo */
                var _paq = (window._paq = window._paq || []);
                
                _paq.push(["trackPageView"]);
                _paq.push(["enableLinkTracking"]);
                (function () {
                    var u = "https://webstats.forsakringskassan.se/matomo/";
                    _paq.push(["setTrackerUrl", u + "matomo.php"]);
                    _paq.push(["setSiteId", "19"]);
                    var d = document,
                        g = d.createElement("script"),
                        s = d.getElementsByTagName("script")[0];
                    g.async = true;
                    g.src = u + "matomo.js";
                    s.parentNode.insertBefore(g, s);
                })();
                /* End Matomo Code */
            } else {
                console.error(
                    "Matomo analytics disabled as we are not running on one of the configured hostnames",
                    allowedHostnames,
                );
            }
        });
    })();
</script>


        <link
            rel="preload"
            href="../../search-data-206ec1.json"
            as="fetch"
            crossorigin
            integrity="sha384-qtmkzIMo8jIhaZ11ePXcG2zo3YLrksmCrLxGlIpa1zJKMpVlqUmLJnc2vkkvwFsx"
            id="search-data"
        />
    </head>
    <body>
        <!-- prettier-ignore -->
        
<template id="motd-message">
<div class="docs-motd docs-motd--info">
    <span class="docs-motd__icon">
        <span class="icon-stack icon-stack--info">
            <svg class="icon icon--circle" focusable="false" aria-hidden="true">
                <use xlink:href="#docs-icon-circle"></use>
            </svg>
            <svg class="icon icon--i" focusable="false" aria-hidden="true">
                <use xlink:href="#docs-icon-i"></use>
            </svg>
        </span>
    </span><span data-bind="screenreader" class="sr-only"></span>
    <p data-bind="message"></p></div>
</template>


<div id="motd-container">
    </div>
<div class="cookie-warning">
    <!-- [html-validate-disable-next heading-level, no-unused-disable -- allowed sectioning root] -->
    <h1>Kakor på webbplatsen</h1>
    <p>
        Vi använder kakor (cookies) för att webbplatsen ska fungera så bra som möjligt för dig.<br />
        Vi använder också kakor för webbanalys för att göra webbplatsen bättre.
    </p>
    <p>Godkänner du att vi också använder kakor för webbanalys?</p>

    <div class="button-group">
        <button id="consent-all-button" class="button button-group__item button--primary" type="button">
            Ja, jag godkänner alla kakor
        </button>

        <button id="consent-functional-button" class="button button-group__item button--secondary" type="button">
            Nej, jag godkänner bara nödvändiga kakor
        </button>
    </div>
</div>


        <div class="layout-wrapper">
            <header>
                <!-- prettier-ignore --><div class="page-header__root">
    <div class="page-header">
        <a class="page-header__logo" href="../../index.html">
            <span aria-label="FK Designsystem" role="img" class="page-header__logo--small"> </span>
        </a>
        <a class="page-header__app-name" href="../../index.html"> FK Designsystem </a>
        <div class="page-header__right"><nav id="topnav" class="docs-topnav" aria-label="Primär">
    <ul class="docs-topnav__list">
        <!-- prettier-ignore -->
        
        
        
        <li class="docs-topnav__item ">
            <a class="docs-topnav__anchor" href="../../gettingstarted/"> Kom igång </a>
        </li>
        
        
        
        
        <li class="docs-topnav__item ">
            <a class="docs-topnav__anchor" href="../../components/"> Komponenter </a>
        </li>
        
        
        
        
        <li class="docs-topnav__item highlight">
            <a class="docs-topnav__anchor" href="../"> Guider </a>
        </li>
        
        
        
        
        <li class="docs-topnav__item ">
            <a class="docs-topnav__anchor" href="../../functions/"> Funktioner </a>
        </li>
        
        
        
        
        <li class="docs-topnav__item ">
            <a class="docs-topnav__anchor" href="../../styles/"> Visuellt </a>
        </li>
        <li class="docs-topnav__item docs-topnav__item--more" style="visibility: hidden">
            <button type="button" class="docs-topnav__anchor" aria-expanded="false">
                <span>Mer</span>
                <svg class="icon" focusable="false" aria-hidden="true">
                    <use xlink:href="#docs-icon-arrow-down"></use>
                </svg>
            </button>
            <div class="docs-contextmenu">
                <ul class="docs-contextmenu__list">
                    <!-- prettier-ignore -->
                    
                    
                    
                    <li class="docs-contextmenu__item " style="display: none">
                        <a class="docs-contextmenu__anchor" href="../../gettingstarted/"> Kom igång </a>
                    </li>
                    
                    
                    
                    
                    <li class="docs-contextmenu__item " style="display: none">
                        <a class="docs-contextmenu__anchor" href="../../components/"> Komponenter </a>
                    </li>
                    
                    
                    
                    
                    <li class="docs-contextmenu__item highlight" style="display: none">
                        <a class="docs-contextmenu__anchor" href="../"> Guider </a>
                    </li>
                    
                    
                    
                    
                    <li class="docs-contextmenu__item " style="display: none">
                        <a class="docs-contextmenu__anchor" href="../../functions/"> Funktioner </a>
                    </li>
                    
                    
                    
                    
                    <li class="docs-contextmenu__item " style="display: none">
                        <a class="docs-contextmenu__anchor" href="../../styles/"> Visuellt </a>
                    </li>
                    </ul>
            </div>
        </li>
    </ul>
</nav>

            <div class="page-header__right-slot">
                <div class="toolbar"><div class="toolbar__item">
    <form id="search" role="search">
        <button class="text-field__input" type="submit">
            <svg focusable="false" class="icon button__icon">
                <use xlink:href="#docs-icon-search"></use></svg
            >Sök <kbd>ctrl-k</kbd>
        </button>
    </form>
</div>
<div class="toolbar__item">
    <div class="select-field" style="visibility: hidden">
        <label for="fkds-theme-select" class="label sr-only"> Tema </label>
        <div class="select-field__icon-wrapper">
            <select id="fkds-theme-select" class="select-field__select">
                <option value="exp">Försäkringskassan</option>
                <option value="int">FK Hapo</option>
            </select>
            <svg focusable="false" class="icon select-field__icon">
                <use xlink:href="#docs-icon-arrow-down"></use>
            </svg>
        </div>
    </div>

    <script>
        function themeSelector() {
            function getSelectedTheme(key) {
                return window.localStorage.getItem(key) ?? "exp";
            }

            function saveSelectedTheme(key, value) {
                window.localStorage.setItem(key, value);
            }

            function enableTheme(theme) {
                const style = Array.from(document.querySelectorAll("[data-theme]"));
                for (const el of style) {
                    el.disabled = el.dataset.theme !== theme;
                }
            }

            const el = document.querySelector("#fkds-theme-select");
            const wrapper = /** @type {HTMLElement} */ (el.closest(".select-field"));
            el.addEventListener("change", () => {
                const theme = el.value;
                saveSelectedTheme("fkds-theme", theme);
                enableTheme(theme);
            });

            const selected = getSelectedTheme("fkds-theme");
            enableTheme(selected);
            el.value = selected;

            wrapper.style.visibility = null;
        }

        themeSelector();
    </script>
</div>
</div>
            </div>
        </div>
    </div>
</div>
</header>

            <div id="primary">
                <!-- prettier-ignore -->
<div id="sidenav">
<input type="checkbox" class="sidenav__toggle" aria-label="Open/close navigation" />
<nav class="navigation" aria-label="Sekundär">
<ol>
    <!-- prettier-ignore --><!-- prettier-ignore -->
    <li class="expandable ">
        <details >
            <summary>Formatering och parsning</summary>
            <!-- prettier-ignore -->
            
            
<ol>
    <!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="../formatting-and-parsing/formatter-parser.html"
            
        >
            Formatering och parsning
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="../formatting-and-parsing/custom-formatter-parser.html"
            
        >
            Formaterare och parser - anpassad
        </a>
    </li><!-- prettier-ignore --></ol>

            
        </details>
    </li><!-- prettier-ignore -->
    <!-- prettier-ignore --><!-- prettier-ignore -->
    <li class="expandable active">
        <details open>
            <summary>Validering och felhantering</summary>
            <!-- prettier-ignore -->
            
            
<ol>
    <!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="./validation.html"
            
        >
            Validering och felhantering
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="./custom-error-message.html"
            
        >
            Felmeddelande - anpassat
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="./cross-validation.html"
            
        >
            Korsvalidering
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link ">
        <!-- prettier-ignore -->
        <a
            href="./length-validation.html"
            
        >
            Längdvalidering
        </a>
    </li><!-- prettier-ignore --><!-- prettier-ignore -->
    <!-- prettier-ignore -->
    <li class="link active">
        <!-- prettier-ignore -->
        <a
            href="./custom-validator.html"
            
        >
            Validator - anpassad
        </a>
    </li><!-- prettier-ignore --></ol>

            
        </details>
    </li><!-- prettier-ignore -->
    <!-- prettier-ignore --></ol>
</nav>
</div>


                <!-- prettier-ignore -->
                <script
                    src="../../assets/vendor-vue-468cb1.js"
                    crossorigin
                    integrity="sha384-KKjiOjaw6Q5fH4WnjR/Bs1bYIxZ/yOxDk3Wtk665LIZMMavXzSWZawkLXt4Xqv48"
                ></script>
                <script
                    src="../../assets/vendor-fkui-logic-80bead.js"
                    crossorigin
                    integrity="sha384-Z2/NqF6ePc4T4iMz6PwSDLkLmvLhbK5QZLGHd8KpTPVYnnXi2X3zc0IfKPQ5pE07"
                ></script>
                <script
                    src="../../assets/vendor-fkui-date-9b7c35.js"
                    crossorigin
                    integrity="sha384-XgTn6yWRIVTQ33nFXLN5K2ZaFcovqJYAUXIhhFPsvsyWe3HAizwpv5WRjT6S1vOM"
                ></script>
                <script
                    src="../../assets/vendor-fkui-vue-dd70c2.js"
                    crossorigin
                    integrity="sha384-1rZtN/+TJGow+mf/UyqG2eJ/RcrJ25Eg+Y/YLWqIHNu9EqL7l+1iHEqioitHi427"
                ></script>
                <script
                    src="../../assets/vendor-forsakringskassan-docs-live-example-187830.js"
                    crossorigin
                    integrity="sha384-JgjVMeOrKPkw95Rgfcde2PhvkOsewLPYjYqYl7zT9PCyCntCVjsLrUhuxU67tJ65"
                ></script>

                <!-- prettier-ignore --><main>
                    <!-- [html-validate-disable-next heading-level, no-unused-disable -- allowed sectioning root] -->
                    <h1 id="title">Validator - anpassad</h1>

                    
                    <div id="aside">
                        <!-- prettier-ignore -->
<dl>
    <!-- prettier-ignore -->
    
</dl>


                        
                        <details id="outline">
                            <summary class="outline__heading">Innehåll</summary>
                            <ul>
                                
                                <li><a href="#validatorn">Validatorn</a></li>
                                
                                <li><a href="#konfiguration">Konfiguration</a></li>
                                
                                <li><a href="#registrering">Registrering</a></li>
                                
                                <li><a href="#anvandning">Användning</a></li>
                                
                                <li><a href="#felmeddelanden">Felmeddelanden</a></li>
                                
                                <li><a href="#exempel">Exempel</a></li>
                                
                                <li><a href="#relaterat">Relaterat</a></li>
                                
                            </ul>
                        </details>
                        
                    </div>
                    

                    <div id="content">
                        <!-- prettier-ignore -->
<p>Om ingen av de fördefinerade validatorerna passar dina behov så går det bra att skapa en egen validator i din applikation.</p>
<p>Låt oss utgå från att du vill ha en validator som verifierar att texten i ett input-fält börjar med ett konfigurerbart värde.
Du vill även att validatorn ska ha ett fördefinierad felmeddelande som visas när valideringen inte är rätt.</p>
<h2 id="validatorn"><a class="header-anchor" href="#validatorn">Validatorn</a></h2><p>Logiken som utför valideringen skrivs i metoden:</p>

                <div
                    id="example-2f329e"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="typescript"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-typescript" tabindex="0"><span class="hljs-title function_">validation</span>(<span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">element</span>: <span class="hljs-title class_">ValidatableHTMLElement</span>, <span class="hljs-attr">config</span>: <span class="hljs-title class_">TConfig</span>): <span class="hljs-built_in">boolean</span>
</code></pre>
                </div>
            <p>där:</p>
<ul>
<li><code>value</code> är det inmatade värdet som ska valideras</li>
<li><code>element</code> är HTML elementet vars värde valideras</li>
<li><code>config</code> är konsumentens konfiguration (dvs det som skickats in till v-validation=&quot;{ ... }&quot;)</li>
</ul>
<p>Observera att värdet i <code>value</code> är en <code>string</code> och att det är vy-värdet innan parsning och formatering.
Värdet kan därmed behöva hantering och verifiering innan den faktiska valideringen sker.
Det är först efter en lyckad validering som eventuell parsning och formatering sker.
Se mer om parsning och formatering här: <a href="../formatting-and-parsing/custom-formatter-parser.html">Gör din egen formaterare och parser</a>.</p>
<p>Resultatet av valideringen returneras i form av en <code>boolean</code> där:</p>
<ul>
<li><code>true</code> innebär att det inmatade värdet är giltigt</li>
<li><code>false</code> innebär att det inmatade värdet är ogiltigt och ett felmeddelande presenteras</li>
</ul>
<p>Börja med att skapa en enklare validering där du kontrollerar om <code>value</code> börjar med den fasta strängen &quot;demo&quot;.
Om din validator används på frivilliga fält, så är även ett tomt värde giltigt.
Den kontrollen görs enklast tidigt i din validator-logik med hjälp av metoden <code>isEmpty</code>.
Validatorns <code>name</code> är det som sedan används för att aktivera validatorn på ett input-fält.</p>

                <div
                    id="example-e7d946"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="typescript"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-typescript" tabindex="0"><span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> <span class="hljs-title class_">Validator</span>, isEmpty } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@fkui/logic&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">startsWithValidator</span>: <span class="hljs-title class_">Validator</span> = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;startsWith&quot;</span>,
    <span class="hljs-title function_">validation</span>(<span class="hljs-params">value</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isEmpty</span>(value)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;demo&quot;</span>);
    },
};
</code></pre>
                </div>
            <p>Glöm inte att skriva tester som verifierar att validatorn fungerar som tänkt.
Förslagsvis genom att bryta ut logiken till en egen funktion, då blir den enkel att testa med Jest.</p>

                <div
                    id="example-87103f"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="diff"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-diff" tabindex="0"><span class="hljs-addition">+function startsWithPattern(input: string, pattern: string): boolean {</span>
<span class="hljs-addition">+   return input.startsWith(pattern);</span>
<span class="hljs-addition">+}</span>

export const startsWithValidator: Validator = {
    name: &quot;startsWith&quot;,
    validation(value) {
        if (isEmpty(value)) {
            return true;
        }
<span class="hljs-deletion">-        return value.startsWith(&quot;demo&quot;);</span>
<span class="hljs-addition">+        return startsWithPattern(value, &quot;demo&quot;);</span>
    },
};
</code></pre>
                </div>
            <h2 id="konfiguration"><a class="header-anchor" href="#konfiguration">Konfiguration</a></h2><p>För att få en mer flexibel validator kan du göra det möjligt att välja start-sträng.
Det gör du genom att ge den stöd för att ta emot en konfiguration från konsumenten.
Om konsumenten inte förser validatorn med konfiguration så sätter du även ett standardvärde &quot;demo&quot;.</p>

                <div
                    id="example-b67be5"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="diff"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-diff" tabindex="0">function startsWithPattern(input: string, pattern: string): boolean {
    return input.startsWith(pattern);
}

<span class="hljs-addition">+interface StartsWithConfig {</span>
<span class="hljs-addition">+    startString?: string;</span>
<span class="hljs-addition">+}</span>

<span class="hljs-addition">+const defaultConfig = {</span>
<span class="hljs-addition">+    startString: &quot;demo&quot;,</span>
<span class="hljs-addition">+};</span>

<span class="hljs-deletion">-export const startsWithValidator: Validator = {</span>
<span class="hljs-addition">+export const startsWithValidator: Validator&lt;StartsWithConfig&gt; = {</span>
    name: &quot;startsWith&quot;,
<span class="hljs-deletion">-    validation(value) {</span>
<span class="hljs-addition">+    validation(value, element, userConfig) {</span>
        if (isEmpty(value)) {
            return true;
        }
<span class="hljs-addition">+       const config = { ...defaultConfig, ...userConfig };</span>
<span class="hljs-deletion">-       return startsWithPattern(value, &quot;demo&quot;);</span>
<span class="hljs-addition">+       return startsWithPattern(value, config.startString);</span>
    },
};
</code></pre>
                </div>
            <p>Om det finns möjlighet till felaktig konfiguration eller om standardvärden inte används måste du införa felhantering:</p>

                <div
                    id="example-cbf8e7"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="typescript"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-typescript" tabindex="0"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">startsWithValidator</span>: <span class="hljs-title class_">Validator</span>&lt;<span class="hljs-title class_">StartsWithConfig</span>&gt; = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;startsWith&quot;</span>,
    <span class="hljs-title function_">validation</span>(<span class="hljs-params">value, element, configuration</span>) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isSet</span>(configuration.<span class="hljs-property">startString</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(
                <span class="hljs-string">&quot;startsWithValidator: configuration.startString is missing!&quot;</span>,
            );
        }
    },
};
</code></pre>
                </div>
            <h2 id="registrering"><a class="header-anchor" href="#registrering">Registrering</a></h2><p>För att göra validatorn tillgänglig för användning i din applikation så behöver den registreras.
Tänk på att bara registrera validatorn en gång, förslagsvis görs det globalt tillsammans med registrering av plugins m.m. i t.ex. <code>main.ts</code>. Gör det inte i en komponents lifecycle-hooks så som <code>created</code>, <code>mounted</code> m.fl.</p>

                <div
                    id="example-5fce09"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="diff"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-diff" tabindex="0"><span class="hljs-addition">+ ValidationService.registerValidator(customStartValidator);</span>
</code></pre>
                </div>
            <p>Nu när validatorn är klar så passar det bra att skriva komponenttester för att verifiera att validatorn är rätt registrerad och att den går att använda tillsammans med sin konfiguration.</p>
<h2 id="anvandning"><a class="header-anchor" href="#anvandning">Användning</a></h2><p>Aktivera validatorn på ditt inputfält genom att lägga till direktivet <code>v-validation.startsWith</code> och förse den med en konfiguration.
I exemplet nedan så anger du värdet <code>test</code> till konfigurationens attribut <code>startString</code>. Nu kommer validatorn validera att input-fältets värde börjar med &quot;test&quot;.</p>

                <div
                    id="example-692d88"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="diff"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-diff" tabindex="0">&lt;f-text-field
    v-model=&quot;model&quot;
<span class="hljs-addition">+    v-validation.startsWith=&quot;{</span>
<span class="hljs-addition">+        startsWith: { startString: &#x27;test&#x27; },</span>
<span class="hljs-addition">+    }&quot;</span>
&gt;
    Detta fält accepterar bara strängar som börjar med &#x27;test&#x27;
&lt;/f-text-field&gt;
</code></pre>
                </div>
            <h2 id="felmeddelanden"><a class="header-anchor" href="#felmeddelanden">Felmeddelanden</a></h2><p>Om input-fältets värde inte börjar med &quot;test&quot;, kommer fältet att markeras som felaktigt och felmeddelandet &quot;STARTSWITH&quot; kommer att visas vid ettiketten.
För att få ett mer förklarande felmeddelande så uppdaterar du exemplet med en bättre text.
Här finns det två vägar att gå.
Antigen sätter man en global standardtext (rekomenderat) eller så sätter man en specifik text för varje input-fält som använder validatorn.</p>
<p>Börja med att sätta ett specifikt felmeddelande till just detta input-fält.
Det gör du genom att lägga till attributet <code>errorMessage</code> till validatorns konfiguration, med en tillhörande text.</p>

                <div
                    id="example-df85a1"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="diff"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-diff" tabindex="0">&lt;f-text-field
    v-model=&quot;model&quot;
    v-validation.startsWith=&quot;{
        startsWith: {
            startString: &#x27;test&#x27;,
<span class="hljs-addition">+            errorMessage: &#x27;Fältet börjar med fel värde.&#x27; },</span>
    }&quot;
&gt;
    Detta fält accepterar bara strängar som börjar med &#x27;test&#x27;
&lt;/f-text-field&gt;

</code></pre>
                </div>
            <p>Ett bättre sätt är att registrera felmeddelandet globalt.</p>
<p>I detta lite enklare exempel så nöjer vi oss med att registrera felmeddelandet direkt i applikationen.
Då behöver <code>errorMessage</code> användas och felmeddelande blir samma på alla ställen i applikationen där validatorn används.</p>

                <div
                    id="example-3e464d"
                    class="code-preview code-preview--default"
                    
                    
                    data-language="diff"
                >
                    
                    <pre class="code-preview__markup"><code class="hljs lang-diff" tabindex="0">  ValidationService.registerValidator(customStartValidator);
<span class="hljs-addition">+ ValidationService.addValidationErrorMessages(</span>
<span class="hljs-addition">+    ValidationErrorMessageBuilder.create()</span>
<span class="hljs-addition">+        .map(&quot;startsWith&quot;, &quot;Fältet börjar med fel värde.&quot;)</span>
<span class="hljs-addition">+        .build(),</span>
);

</code></pre>
                </div>
            <h2 id="exempel"><a class="header-anchor" href="#exempel">Exempel</a></h2><p>Här nedan visas ett komplett exempel med tre input-fält.</p>

            <div
                id="example-b1492a"
                class="code-preview code-preview--default"
                
                
                data-language="vue"
            >
                
                <div class="code-preview__preview">
        <div id="CustomValidatorExample"></div>
        <!-- [html-validate-disable-next element-permitted-content -- technical debt, should be inserted into <head>] -->
        <style>
            
        </style>
        <!-- [html-validate-disable-next require-sri -- technical debt, should generate integrity but we don't know the hash of the compiled file yet] -->
        <script defer src="./CustomValidatorExample-2cd89e.js"></script>
    </div>
                <div>
            <button
                type="button"
                class="button button--discrete code-preview__toggle-markup"
                aria-expanded="false"
                onclick="toggleMarkup(this)"
            >
                <i class="icon icon--code"></i>
                Visa kod
            </button>
         </div>
                <div
                    class="code-preview__expand animate-expand"
                    style="height: 0px;"
                    hidden
                >
                    <pre class="code-preview__markup"><code class="hljs lang-html" tabindex="0"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">f-text-field</span>
            <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;modelFoo&quot;</span>
            <span class="hljs-attr">v-validation.startsWith.maxLength</span>=<span class="hljs-string">&quot;{
                startsWith: { startString: &#x27;foo&#x27; },
                maxLength: { length: 20 },
            }&quot;</span>
        &gt;</span>
            Detta fält accepterar bara strängar som börjar med &#x27;foo&#x27;
            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">description</span>=<span class="hljs-string">&quot;{ descriptionClass }&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;descriptionClass&quot;</span>&gt;</span> Använder globalt felmeddelande <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">f-text-field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">f-text-field</span>
            <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;modelBar&quot;</span>
            <span class="hljs-attr">v-validation.startsWith.maxLength</span>=<span class="hljs-string">&quot;{
                startsWith: {
                    startString: &#x27;bar&#x27;,
                    errorMessage: &#x27;Texten måste börja med bar&#x27;,
                },
                maxLength: { length: 20 },
            }&quot;</span>
        &gt;</span>
            Detta fält accepterar bara strängar som börjar med &#x27;bar&#x27;
            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">description</span>=<span class="hljs-string">&quot;{ descriptionClass }&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;descriptionClass&quot;</span>&gt;</span> Använder ett specifik felmeddelande <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">f-text-field</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">f-text-field</span>
            <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;modelDemo&quot;</span>
            <span class="hljs-attr">v-validation.startsWith.maxLength</span>=<span class="hljs-string">&quot;{
                maxLength: { length: 20 },
            }&quot;</span>
        &gt;</span>
            Detta fält accepterar bara strängar som börjar med &#x27;demo&#x27;
            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">description</span>=<span class="hljs-string">&quot;{ descriptionClass }&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;descriptionClass&quot;</span>&gt;</span> Saknar konfiguration för `startsWith` <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">f-text-field</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FTextField</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@fkui/vue&quot;</span>;
<span class="hljs-keyword">import</span> {
    <span class="hljs-title class_">ValidationErrorMessageBuilder</span>,
    <span class="hljs-title class_">ValidationService</span>,
    type <span class="hljs-title class_">Validator</span>,
    isEmpty,
} <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@fkui/logic&quot;</span>;
<span class="hljs-keyword">import</span> { defineComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">startsWithPattern</span>(<span class="hljs-params">input: string, pattern: string</span>): boolean {
    <span class="hljs-keyword">return</span> input.<span class="hljs-title function_">startsWith</span>(pattern);
}

interface <span class="hljs-title class_">StartsWithConfig</span> {
    startString?: string;
}

<span class="hljs-keyword">const</span> defaultConfig = {
    <span class="hljs-attr">startString</span>: <span class="hljs-string">&quot;demo&quot;</span>,
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">startsWithValidator</span>: <span class="hljs-title class_">Validator</span>&lt;<span class="hljs-title class_">StartsWithConfig</span>&gt; = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;startsWith&quot;</span>,
    <span class="hljs-title function_">validation</span>(<span class="hljs-params">value, element, userConfig</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isEmpty</span>(value)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">const</span> config = { ...defaultConfig, ...userConfig };
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">startsWithPattern</span>(value, config.<span class="hljs-property">startString</span>);
    },
};

<span class="hljs-title class_">ValidationService</span>.<span class="hljs-title function_">registerValidator</span>(startsWithValidator);
<span class="hljs-title class_">ValidationService</span>.<span class="hljs-title function_">addValidationErrorMessages</span>(
    <span class="hljs-title class_">ValidationErrorMessageBuilder</span>.<span class="hljs-title function_">create</span>()
        .<span class="hljs-title function_">map</span>(<span class="hljs-string">&quot;startsWith&quot;</span>, <span class="hljs-string">&quot;Fältet börjar med fel värde.&quot;</span>)
        .<span class="hljs-title function_">build</span>(),
);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;CustomValidator&quot;</span>,
    <span class="hljs-attr">components</span>: { <span class="hljs-title class_">FTextField</span> },
    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) {
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">modelFoo</span>: <span class="hljs-string">&quot;&quot;</span>,
            <span class="hljs-attr">modelBar</span>: <span class="hljs-string">&quot;&quot;</span>,
            <span class="hljs-attr">modelDemo</span>: <span class="hljs-string">&quot;&quot;</span>,
        };
    },
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
                </div>
            </div>
        <h2 id="relaterat"><a class="header-anchor" href="#relaterat">Relaterat</a></h2><p><a href="./validation.html">Validering och felhantering</a></p>
<p><a href="../../components/validation/validators.html">Validatorer</a></p>
<p><a href="../../functions/plugins/validationplugin.html">ValidationPlugin</a></p>
<p><a href="../../components/input/textfield-specialized.html">Specialiserade inmatningsfält</a></p>


                    </div>
                </main>
            </div>

            <footer>
                <!-- prettier-ignore --><div class="footer__left">
    <h1>Kontakta oss</h1>
    <ul>
        <li><a class="anchor" href="mailto:designsystem@forsakringskassan.se">designsystem@forsakringskassan.se</a></li>
        <li><a class="anchor" href="../../gettingstarted/about/index.html">Om designsystemet</a></li>
    </ul>
</div>

<div class="footer__center"></div>

<div class="footer__right">
    <!-- prettier-ignore -->
    <div class="version">
    <!-- prettier-ignore -->
    <div class="heading--h1">FKDS version 5.42.0</div>
</div>
<div class="toolbar__item">
    <form id="version">
        <button type="submit">
            <span id="version-info" class="anchor"> Byt version </span>
        </button>
    </form>

    <dialog id="version-dialog">
        <div id="version-dialog-head">
            <h1>Välj version</h1>
            <button type="button" class="button button--discrete button--discrete--black">
                <span>Stäng</span>
                <svg class="button__icon icon f-icon-close" focusable="false" aria-hidden>
                    <use xlink:href="#f-icon-close"></use>
                </svg>
            </button>
        </div>
        <div id="version-list">
            <p>Var god vänta, laddar versionsdata...</p>
        </div>
    </dialog>
</div>

<template id="version-list-item">
    <li class="list__item">
        <a class="list__item__itempane">template</a>
    </li>
</template>


    <ul>
        <li><a class="anchor" href="../../changelog.html">Changelog</a></li>
        <li><a class="anchor" href="../../accessibility.html">Tillgänglighetsredogörelse</a></li>
        <li><a class="anchor" href="https://github.com/Forsakringskassan/designsystem">GitHub</a></li>
    </ul>
</div>
</footer>
        </div>

        <!-- prettier-ignore --><div aria-hidden="true" style="display: none">
    <svg xmlns="http://www.w3.org/2000/svg" focusable="false">
        <symbol id="docs-icon-search" viewBox="0 0 512 512">
            <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
            <path
                fill="currentColor"
                d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34M208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128"
            ></path>
        </symbol>
        <symbol id="docs-icon-close" viewBox="0 0 512 512">
            <path
                fill="currentColor"
                d="m322.72 256 100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L256 189.28 155.93 89.21c-12.28-12.28-32.19-12.28-44.48 0l-22.24 22.24c-12.28 12.28-12.28 32.19 0 44.48L189.28 256 89.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L256 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48z"
            ></path>
        </symbol>
        <symbol id="docs-icon-arrow-down" viewBox="0 0 512 512">
            <path
                fill="currentColor"
                d="M239.373 380.982 45.03 186.638c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04l154.746 154.021L411.089 129.99c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L273.315 380.982c-9.373 9.372-24.569 9.372-33.942 0"
            ></path>
        </symbol>
        <symbol id="docs-icon-circle" xml:space="preserve" viewBox="0 0 512 512">
            <path
                d="M489.5 256c0 129-104.6 233.5-233.5 233.5C127 489.5 22.5 385 22.5 256S127 22.5 256 22.5 489.5 127 489.5 256"
                style="fill: currentColor"
            ></path>
            <path
                d="M512 256c0 141.4-114.6 256-256 256S0 397.4 0 256 114.6 0 256 0s256 114.6 256 256M256 469.3c117.8 0 213.3-95.5 213.3-213.3S373.8 42.7 256 42.7 42.7 138.2 42.7 256 138.2 469.3 256 469.3"
                style="fill-rule: evenodd; clip-rule: evenodd"
            ></path>
        </symbol>
        <symbol id="docs-icon-i" xml:space="preserve" x="0" y="0" version="1.1" viewBox="0 0 512 512">
            <style>
                .i {
                    fill: currentColor;
                }
            </style>
            <path
                d="M228.25 243.12c0-15.33 12.42-27.75 27.75-27.75s27.75 12.43 27.75 27.75v117.19c0 15.33-12.43 27.75-27.75 27.75-15.33 0-27.75-12.43-27.75-27.75zM285.09 153.03c0 16.07-13.02 29.09-29.09 29.09s-29.09-13.02-29.09-29.09 13.02-29.09 29.09-29.09 29.09 13.02 29.09 29.09"
                class="i"
            ></path>
        </symbol>
    </svg>
</div>
<!-- prettier-ignore -->
        <dialog id="search-dialog">
    <!-- [html-validate-disable-next wcag/h32 -- handled via script] -->
    <form id="search-form">
        <div class="text-field">
            <label for="search-field" class="label"> Sök </label>
            <div class="text-field__input-wrapper">
                <div class="text-field__icon-wrapper">
                    <input
                        autofocus
                        autocomplete="off"
                        autocapitalize="off"
                        autocorrect="off"
                        id="search-field"
                        type="text"
                        class="text-field__input"
                        maxlength="50"
                        placeholder="Skriv för att börja söka"
                    />
                </div>
            </div>
        </div>
        <div id="search-results"></div>
        <p><kbd>Esc</kbd> för att stänga <kbd>Pil upp/ner</kbd> för att navigera <kbd>Enter</kbd> för att välja</p>
    </form>
</dialog>


        <!-- prettier-ignore -->
        <script
            src="../../assets/processors/motd/index-8c87e1.js"
            crossorigin
            integrity="sha384-VgbNs0pGkTPNii6sZDsQfyDa2hDTsNJePPW42/GgMW4jj8RspvO2p7e7j22mfz/b"
            
        ></script>
        <script
            src="../../assets/processors/selectable-version/select-version-d38a87.js"
            crossorigin
            integrity="sha384-h+ddMgyQ7IcE+SecmBvw0gBRmhpZDzZrdpFu5Csxoa+6GnktdMYR91Ea4PF1Uul1"
            
        ></script>
        <script
            src="../../assets/main-4751c4.js"
            crossorigin
            integrity="sha384-q15KHOoz4gQtk9HXaWqxES3YsgzEsJu3opgGi9+VKgdWVRscUrF84pZgEse5YQgN"
            
        ></script>
    </body>

    <!--

         Source file: docs/guides/validation-and-error-handling/custom-validator.md
         Document ID: fs:docs/guides/validation-and-error-handling/custom-validator.md
         Document name: custom-validator
         Document alias: 

    -->
</html>
